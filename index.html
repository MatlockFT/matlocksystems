<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta and Title -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MATLOCK SCORING SYSTEM</title>
    
    <!-- Styles -->
    <style>
        /* CSS Reset and Box Sizing */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Body Styles */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #0d0d0d; /* Dark color close to black */
            color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
        }

        /* Scorecard Container */
        .scorecard {
            background-color: #0d0d0d; /* Same as body background to eliminate any contrast */
            padding: 30px;
            border-radius: 15px;
            max-width: 1000px; /* Increased max-width for larger screens */
            width: 100%;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 40px;
        }

        /* Heading Styles */
        h2 {
            font-size: 32px;
            color: #ff6347;
            margin-bottom: 20px;
            letter-spacing: 1.2px;
            text-align: center;
        }

        /* Input, Button, and Select Styles */
        input, button, select {
            width: 100%;
            padding: 10px 12px;
            font-size: 16px;
            color: #f0f0f0;
            background-color: #1a1a1a;
            border: 1px solid #444;
            border-radius: 5px;
            margin-bottom: 15px;
            outline: none;
            transition: all 0.3s ease;
        }

        /* Placeholder Styles */
        input::placeholder {
            color: #888;
        }

        /* Focus Styles */
        input:focus, select:focus {
            border-color: #ff6347;
        }

        /* Button Styles */
        button {
            background-color: #ff6347;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
            border-radius: 5px;
        }

        /* Button Hover Styles */
        button:hover {
            background-color: #e55347;
        }

        /* Disabled Button Styles */
        button:disabled {
            background-color: #333;
            color: #888;
            cursor: not-allowed;
        }

        /* Locked In Button Styles */
        .locked {
            background-color: #27ae60;
            color: white;
        }

        /* Green Field Styles */
        .green-field {
            background-color: #27ae60;
            color: white;
            border-color: #27ae60;
        }

        /* Hashtag Container */
        .hashtag-container {
            display: flex;
            justify-content: center;
            width: 100%;
            margin-bottom: 25px;
        }

        .hashtag-container input {
            max-width: 70%;
            text-align: center;
        }

        /* Corners Section */
        .corners {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .corners input {
            width: 40%;
            text-align: center;
            margin: 5px;
        }

        .corners button {
            width: 15%;
            font-weight: bold;
            margin: 5px;
        }

        /* Toggle Switch Container */
        .toggle-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            width: 100%;
        }

        .toggle-container label {
            margin-right: 10px;
            color: #f0f0f0;
        }

        /* Switch Styles */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        /* Slider Styles */
        .slider {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #444;
            transition: .4s;
            border-radius: 34px;
        }

        /* Slider Before Styles */
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        /* Checked Styles */
        input:checked + .slider {
            background-color: #ff6347;
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        /* Round Container */
        .round {
            background-color: #0d0d0d; /* Same as body background */
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            width: 100%;
        }

        h3#roundHeading {
            text-align: center;
            font-size: 22px;
            margin-bottom: 15px;
        }

        /* Criteria Section */
        .criteria {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            width: 100%;
        }

        /* Adjust the widths of the criteria columns */
        .criteria .select-red,
        .criteria .tooltip-container,
        .criteria .select-blue {
            width: 30%;
            text-align: center;
        }

        .criteria .select-red,
        .criteria .select-blue {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .criteria label {
            margin-bottom: 5px;
            font-size: 14px;
        }

        /* Tooltip Styles */
        .tooltip-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 10%;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            font-size: 14px;
            color: #ff6347;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 5px;
            border-radius: 5px;
            position: absolute;
            z-index: 1;
            bottom: 150%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Total Score Section */
        .total-score {
            text-align: center;
            margin-top: 25px;
            font-size: 20px;
            font-weight: bold;
        }

        .total-score span {
            display: block;
            margin-bottom: 5px;
        }

        /* Results Section */
        .results {
            text-align: center;
            background-color: #1a1a1a; /* Slight contrast for readability */
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            width: 100%;
        }

        .round-result {
            margin-bottom: 15px;
        }

        /* Buttons Container */
        .buttons-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-top: 10px;
        }

        .buttons-container button {
            width: 45%;
            margin: 5px;
        }

        /* Share Button Styles */
        .share-button {
            background-color: #1da1f2;
            margin-top: 20px;
        }

        /* Reset Button Styles */
        .reset-button {
            width: 94%;
            margin: 10px 0;
        }

        /* Version Info */
        .version-info {
            margin-top: 20px;
            font-size: 12px;
            color: #888;
        }

        /* Media Queries */
        @media (min-width: 768px) {
            .scorecard {
                width: 90%;
            }

            h2 {
                font-size: 36px;
            }
        }

        @media (min-width: 1024px) {
            .scorecard {
                width: 80%;
            }

            h2 {
                font-size: 40px;
            }

            .buttons-container button {
                width: 30%;
            }

            .reset-button {
                width: 30%;
            }
        }
    </style>
</head>
<body>
    <div class="scorecard">
        <h2>MATLOCK SCORING SYSTEM</h2>

        <!-- Hashtag Section -->
        <div class="hashtag-container">
            <input type="text" id="hashtag" placeholder="#EventHashtag" oninput="handleHashtagInput()">
        </div>

        <!-- Corners Section -->
        <div class="corners">
            <input type="text" id="redCornerName" placeholder="Enter Red Corner Name" oninput="checkInputs()">
            <button id="lockInButton" onclick="lockInNames()" disabled>LOCK IN</button>
            <input type="text" id="blueCornerName" placeholder="Enter Blue Corner Name" oninput="checkInputs()">
        </div>

        <!-- Toggle Switch -->
        <div class="toggle-container">
            <label for="championshipFightToggle">Five Round Fight</label>
            <label class="switch">
                <input type="checkbox" id="championshipFightToggle">
                <span class="slider"></span>
            </label>
        </div>

        <!-- Round Scoring Section -->
        <div id="roundScoring" class="round active">
            <h3 id="roundHeading">Round 1</h3>

            <!-- Damage Criterion -->
            <div class="criteria">
                <div class="select-red">
                    <label for="damageRed">Damage by Red Corner</label>
                    <select id="damageRed" onchange="checkRoundInputs()">
                        <option value="">Select Damage</option>
                        <option value="0">0 - No effective damage</option>
                        <option value="1">1 - Minor damage</option>
                        <option value="2">2 - Visible damage</option>
                        <option value="3">3 - Significant damage</option>
                    </select>
                </div>

                <div class="tooltip-container">
                    <div class="tooltip">
                        ⓘ
                        <span class="tooltiptext">Damage refers to effective strikes that significantly impact your opponent.</span>
                    </div>
                </div>

                <div class="select-blue">
                    <label for="damageBlue">Damage by Blue Corner</label>
                    <select id="damageBlue" onchange="checkRoundInputs()">
                        <option value="">Select Damage</option>
                        <option value="0">0 - No effective damage</option>
                        <option value="1">1 - Minor damage</option>
                        <option value="2">2 - Visible damage</option>
                        <option value="3">3 - Significant damage</option>
                    </select>
                </div>
            </div>

            <!-- Control Criterion -->
            <div class="criteria">
                <div class="select-red">
                    <label for="controlRed">Control by Red Corner</label>
                    <select id="controlRed" onchange="checkRoundInputs()">
                        <option value="">Select Control</option>
                        <option value="0">0 - No control</option>
                        <option value="1">1 - Brief control</option>
                        <option value="2">2 - Majority control</option>
                        <option value="3">3 - Complete control</option>
                    </select>
                </div>

                <div class="tooltip-container">
                    <div class="tooltip">
                        ⓘ
                        <span class="tooltiptext">Control refers to dominance, including ground control and overall pressure.</span>
                    </div>
                </div>

                <div class="select-blue">
                    <label for="controlBlue">Control by Blue Corner</label>
                    <select id="controlBlue" onchange="checkRoundInputs()">
                        <option value="">Select Control</option>
                        <option value="0">0 - No control</option>
                        <option value="1">1 - Brief control</option>
                        <option value="2">2 - Majority control</option>
                        <option value="3">3 - Complete control</option>
                    </select>
                </div>
            </div>

            <!-- Defense Criterion -->
            <div class="criteria">
                <div class="select-red">
                    <label for="defenseRed">Defense by Red Corner</label>
                    <select id="defenseRed" onchange="checkRoundInputs()">
                        <option value="">Select Defense</option>
                        <option value="0">0 - Ineffective defense</option>
                        <option value="1">1 - Minimal defense</option>
                        <option value="2">2 - Effective defense</option>
                        <option value="3">3 - Excellent defense</option>
                    </select>
                </div>

                <div class="tooltip-container">
                    <div class="tooltip">
                        ⓘ
                        <span class="tooltiptext">Defense refers to blocking, evading, and countering effectively.</span>
                    </div>
                </div>

                <div class="select-blue">
                    <label for="defenseBlue">Defense by Blue Corner</label>
                    <select id="defenseBlue" onchange="checkRoundInputs()">
                        <option value="">Select Defense</option>
                        <option value="0">0 - Ineffective defense</option>
                        <option value="1">1 - Minimal defense</option>
                        <option value="2">2 - Effective defense</option>
                        <option value="3">3 - Excellent defense</option>
                    </select>
                </div>
            </div>

            <!-- Buttons Container -->
            <div class="buttons-container">
                <button class="submit-button" id="submitButton" onclick="submitRound()" disabled>Submit Round Score</button>
                <button class="share-round-button" id="shareRoundButton" onclick="shareRoundScore()" disabled>Share Round Score</button>
                <button class="reset-button" onclick="resetScorecard()">Reset Scorecard</button>
            </div>

            <button class="share-scorecard-button" style="display:none" onclick="shareToTwitter()">Share My Scorecard</button>
        </div>

        <div class="results" id="results">
            <h3>Results</h3>
        </div>

        <div class="total-score">
            <span id="redCornerTotal">Red Corner Total Score: 0</span>
            <span id="blueCornerTotal">Blue Corner Total Score: 0</span>
            <span id="winnerAnnouncement"></span>
        </div>

        <button class="share-button" onclick="shareToTwitter()">Share on Twitter</button>

        <div class="version-info">V.1.0</div>
    </div>

    <!-- Scripts -->
    <script>
        let currentRound = 1;
        let championshipFight = false;
        let redTotalScore = 0;
        let blueTotalScore = 0;
        const maxRounds = 5;
        const normalRounds = 3;
        let totalRounds = normalRounds; // Default to 3 rounds
        const redScores = [];
        const blueScores = [];

        function checkInputs() {
            const eventName = document.getElementById('hashtag').value.trim();
            const redCorner = document.getElementById('redCornerName').value.trim();
            const blueCorner = document.getElementById('blueCornerName').value.trim();
            document.getElementById('lockInButton').disabled = !(eventName && redCorner && blueCorner);
        }

        function handleHashtagInput() {
            const hashtagField = document.getElementById('hashtag');
            let value = hashtagField.value.replace(/\s+/g, ''); // Remove spaces
            if (!value.startsWith('#')) {
                value = '#' + value.replace('#', '');
            }
            hashtagField.value = value;
            checkInputs();
        }

        function checkRoundInputs() {
            const damageRed = document.getElementById('damageRed').value;
            const damageBlue = document.getElementById('damageBlue').value;
            const controlRed = document.getElementById('controlRed').value;
            const controlBlue = document.getElementById('controlBlue').value;
            const defenseRed = document.getElementById('defenseRed').value;
            const defenseBlue = document.getElementById('defenseBlue').value;

            const allFilled = damageRed && damageBlue && controlRed && controlBlue && defenseRed && defenseBlue;
            document.getElementById('submitButton').disabled = !allFilled;
            document.getElementById('shareRoundButton').disabled = !allFilled;
        }

        function lockInNames() {
            const redCornerName = document.getElementById('redCornerName').value.trim();
            const blueCornerName = document.getElementById('blueCornerName').value.trim();
            const hashtagField = document.getElementById('hashtag');

            if (!redCornerName || !blueCornerName) {
                alert("Please enter both fighter names.");
                return;
            }

            // Lock the fighter names, hashtag, and toggle switch
            document.getElementById('redCornerName').disabled = true;
            document.getElementById('blueCornerName').disabled = true;
            hashtagField.disabled = true;
            document.getElementById('championshipFightToggle').disabled = true;

            // Apply green field style
            document.querySelectorAll('#redCornerName, #blueCornerName, #hashtag').forEach(input => {
                input.classList.add('green-field');
            });

            document.getElementById('lockInButton').textContent = "Locked In".toUpperCase();
            document.getElementById('lockInButton').classList.add("locked");

            championshipFight = document.getElementById('championshipFightToggle').checked;
            totalRounds = championshipFight ? maxRounds : normalRounds;

            updateLabelsWithNames(redCornerName, blueCornerName);

            // Update round heading
            document.getElementById('roundHeading').textContent = `Round ${currentRound}`;
        }

        function updateLabelsWithNames(redCornerName, blueCornerName) {
            document.querySelector('label[for="damageRed"]').textContent = `Damage by ${redCornerName}`;
            document.querySelector('label[for="damageBlue"]').textContent = `Damage by ${blueCornerName}`;
            document.querySelector('label[for="controlRed"]').textContent = `Control by ${redCornerName}`;
            document.querySelector('label[for="controlBlue"]').textContent = `Control by ${blueCornerName}`;
            document.querySelector('label[for="defenseRed"]').textContent = `Defense by ${redCornerName}`;
            document.querySelector('label[for="defenseBlue"]').textContent = `Defense by ${blueCornerName}`;
        }

        function submitRound() {
            const redCornerName = document.getElementById('redCornerName').value;
            const blueCornerName = document.getElementById('blueCornerName').value;

            const redScore = calculateScore('Red');
            const blueScore = calculateScore('Blue');

            redTotalScore += redScore;
            blueTotalScore += blueScore;

            // Store individual round scores
            redScores.push(redScore);
            blueScores.push(blueScore);

            const roundWinner = redScore > blueScore ? redCornerName : blueScore > redScore ? blueCornerName : 'Draw';
            document.getElementById('results').innerHTML += `
                <div class="round-result">
                    <strong>Round ${currentRound} Results</strong><br>
                    ${redCornerName}: ${redScore.toFixed(1)} (${redTotalScore.toFixed(1)} total)<br>
                    ${blueCornerName}: ${blueScore.toFixed(1)} (${blueTotalScore.toFixed(1)} total)<br>
                    Round Winner: ${roundWinner}
                </div>
            `;

            updateTotalScores();
            resetRoundInputs();

            currentRound++;

            if (currentRound > totalRounds) {
                declareWinner();
                document.getElementById('submitButton').disabled = true;
                document.getElementById('shareRoundButton').disabled = true;
                document.querySelector('.share-scorecard-button').style.display = "block";
            } else {
                document.getElementById('roundHeading').textContent = `Round ${currentRound}`;
                document.getElementById('submitButton').disabled = true;  // Disable until new scores are entered
                document.getElementById('shareRoundButton').disabled = true;
                checkRoundInputs();  // Ensure the submit button reflects the state of the inputs
            }
        }

        function calculateScore(color) {
            const damage = parseInt(document.getElementById(`damage${color}`).value) || 0;
            const control = parseInt(document.getElementById(`control${color}`).value) || 0;
            const defense = parseInt(document.getElementById(`defense${color}`).value) || 0;

            return (damage * 0.5) + (control * 0.3) + (defense * 0.2);
        }

        function updateTotalScores() {
            document.getElementById('redCornerTotal').textContent = `Red Corner Total Score: ${redTotalScore.toFixed(1)}`;
            document.getElementById('blueCornerTotal').textContent = `Blue Corner Total Score: ${blueTotalScore.toFixed(1)}`;
        }

        function resetRoundInputs() {
            document.getElementById('damageRed').value = '';
            document.getElementById('damageBlue').value = '';
            document.getElementById('controlRed').value = '';
            document.getElementById('controlBlue').value = '';
            document.getElementById('defenseRed').value = '';
            document.getElementById('defenseBlue').value = '';
        }

        function declareWinner() {
            const redCornerName = document.getElementById('redCornerName').value;
            const blueCornerName = document.getElementById('blueCornerName').value;
            const winnerAnnouncement = document.getElementById('winnerAnnouncement');

            if (redTotalScore > blueTotalScore) {
                winnerAnnouncement.textContent = `Winner: ${redCornerName}`;
            } else if (blueTotalScore > redTotalScore) {
                winnerAnnouncement.textContent = `Winner: ${blueCornerName}`;
            } else {
                winnerAnnouncement.textContent = "It's a Draw!";
            }
        }

        function resetScorecard() {
            // Reset variables
            currentRound = 1;
            redTotalScore = 0;
            blueTotalScore = 0;
            redScores.length = 0;
            blueScores.length = 0;

            // Reset input fields
            document.querySelectorAll('input, select').forEach(element => {
                element.value = '';
                element.disabled = false;
                element.classList.remove('green-field');
            });

            // Reset UI elements
            document.getElementById('redCornerTotal').textContent = "Red Corner Total Score: 0";
            document.getElementById('blueCornerTotal').textContent = "Blue Corner Total Score: 0";
            document.getElementById('winnerAnnouncement').textContent = "";
            document.getElementById('results').innerHTML = "<h3>Results</h3>";
            document.getElementById('submitButton').disabled = true;
            document.getElementById('shareRoundButton').disabled = true;
            document.querySelector('.share-scorecard-button').style.display = "none";
            document.getElementById('lockInButton').disabled = true;
            document.getElementById('lockInButton').textContent = "LOCK IN";
            document.getElementById('lockInButton').classList.remove("locked");
            document.getElementById('roundHeading').textContent = "Round 1";

            // Re-enable the championship fight toggle
            document.getElementById('championshipFightToggle').disabled = false;

            // Remove green field styles
            document.querySelectorAll('.green-field').forEach(input => {
                input.classList.remove('green-field');
            });

            checkInputs(); // To update the lock-in button state
        }

        function shareRoundScore() {
            const redCornerName = document.getElementById('redCornerName').value;
            const blueCornerName = document.getElementById('blueCornerName').value;
            const eventName = document.getElementById('hashtag').value.trim();
            let tweetText = `Round ${currentRound} Score for ${eventName}:\n`;

            const redScore = calculateScore('Red');
            const blueScore = calculateScore('Blue');

            const redTotalUpToNow = redScores.reduce((acc, score) => acc + score, 0) + redScore;
            const blueTotalUpToNow = blueScores.reduce((acc, score) => acc + score, 0) + blueScore;

            tweetText += `${redCornerName}: ${redScore.toFixed(1)} (${redTotalUpToNow.toFixed(1)} total)\n`;
            tweetText += `${blueCornerName}: ${blueScore.toFixed(1)} (${blueTotalUpToNow.toFixed(1)} total)`;

            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
            window.open(url, '_blank');
        }

        function shareToTwitter() {
            const redCornerName = document.getElementById('redCornerName').value;
            const blueCornerName = document.getElementById('blueCornerName').value;
            const eventName = document.getElementById('hashtag').value.trim();
            const winnerText = document.getElementById('winnerAnnouncement').textContent;
            let tweetText = `My Scorecard for ${eventName}:\n`;

            for (let i = 0; i < redScores.length; i++) {
                tweetText += `Round ${i + 1}: ${redCornerName} ${redScores[i].toFixed(1)} - ${blueScores[i].toFixed(1)} ${blueCornerName}\n`;
            }

            tweetText += `Total: ${redCornerName} ${redTotalScore.toFixed(1)} - ${blueTotalScore.toFixed(1)} ${blueCornerName}\n`;
            tweetText += winnerText;

            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>
